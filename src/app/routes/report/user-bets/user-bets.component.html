<page-header [action]="action">
  <ng-template #action>
    <button (click)='download_report()' style='width:150px;margin: 8px 0 0 8px' nz-button nzBlock [nzType]="'dashed'"
      class="ant-btn__block mb-sm">
      <i *ngIf='!is_down_load' nz-icon nzType="cloud-download" nzTheme="outline"></i>
      <i *ngIf='is_down_load' nz-icon nzType="loading" nzTheme="outline"></i>
      <span>导出表格</span>
    </button>
  </ng-template>
</page-header>
<nz-layout>
  <nz-content>
    <section class="select-lottery">
      <span>
        <span>投注用户名:</span>
        <input nz-input nzSize="small" placeholder="用户昵称" [(ngModel)]="searchData.username"
          class="select-lottery-input" />
      </span>
      <span>
        <span>奖期号:</span>
        <input nz-input nzSize="small" placeholder="奖期号" [(ngModel)]="searchData.issue" class="select-lottery-input" />
      </span>
      <span>
        <span>测试人员:</span>
        <nz-select nzSize="small" style="width: 120px;" [(ngModel)]="searchData.is_tester" nzAllowClear
          nzPlaceHolder="是否测试用户">
          <nz-option nzValue="" nzLabel="全部"></nz-option>
          <nz-option nzValue="1" nzLabel="是"></nz-option>
          <nz-option nzValue="0" nzLabel="否"></nz-option>
        </nz-select>
      </span>
      <span>
        <span>开奖状态:</span>
        <nz-select nzSize="small" style="width: 120px;" [(ngModel)]="searchData.status" nzAllowClear
          nzPlaceHolder="开奖状态">
          <nz-option nzValue="" nzLabel="全部"></nz-option>
          <nz-option nzValue="0" nzLabel="待开奖"></nz-option>
          <nz-option nzValue="1" nzLabel="已撤销"></nz-option>
          <nz-option nzValue="2" nzLabel="未中奖"></nz-option>
          <nz-option nzValue="3" nzLabel="已中奖"></nz-option>
          <nz-option nzValue="4" nzLabel="已派奖"></nz-option>
        </nz-select>
      </span>
      <span>

        <button nz-button nzType="primary" class="select-search" (click)="search()"><i nz-icon
            type="search"></i>搜索</button>&nbsp;&nbsp;
        <button nz-button nzType="primary" class="select-reset" (click)="resetSearch()"><i nz-icon
            type="sync"></i>重置</button>
      </span>
    </section>
    <nz-table #nzTable nzSize="middle" nzBordered [nzScroll]='{x:"1630px", y: "500px" }' [nzLoadingDelay]='500'
      (nzPageIndexChange)='chang_page_index($event)' [nzLoading]='is_load_list' [(nzPageIndex)]='page_index'
      [nzFrontPagination]='false' [nzData]="list_of_aply_data" [nzPageSize]='20' [nzTotal]='list_total'>
      <thead class="ant-table-thead">
        <tr>
          <th nzWidth=90px>用户名称</th>
          <th nzWidth="80px">ID</th>
          <th nzWidth="80px">彩种</th>
          <th nzWidth="160px">奖期号</th>
          <th nzWidth="150px"> 投注号码</th>
          <th nzWidth=90px>开奖号码 </th>
          <th nzWidth="80px">倍数</th>
          <th nzWidth="80px">模式</th>
          <th nzWidth="150px">单注投注额</th>
          <th nzWidth=90px>总投注额</th>
          <th nzWidth=90px>中奖金额 </th>
          <th nzWidth="80px">测试</th>
          <th nzWidth="80px">状态</th>
          <th nzWidth=90px>奖金组</th>
          <th nzWidth="80px">系列</th>
          <th nzWidth="80px">玩法ID</th>
          <th nzWidth="80px">玩法</th>
          <th nzWidth=90px>ip</th>
          <th nzWidth=90px>ip层级</th>
          <th nzWidth=90px>设备类型</th>
        </tr>
      </thead>
      <tbody class="ant-table-tbody">
        <!-- <ng-template cdkDrag ngFor let-data [ngForOf]="nzTable.data"> -->
        <tr class='table_tr' *ngFor="let data of list_of_aply_data">
          <td>{{ data.username}}</td>
          <td>{{data.id}}</td>
          <td>{{data.lottery_sign}}</td>
          <td class='home-change-color' (click)='utilsService.show_modal_text(data.issue)'>
            <span style='width: 160px'>{{ data.issue }}</span>
          </td>
          <td class='home-change-color' (click)='utilsService.show_modal_text(data.bet_number)'>
            <span style='width: 150px'>{{data.bet_number}}</span>
          </td>
          <td class='home-change-color' (click)='utilsService.show_modal_text(data.open_number)'>
            <span style='width: 90px'>{{data.open_number}}</span>
          </td>
          <td>{{data.times}}</td>
          <td> {{data.mode|unit}}</td>
          <td>{{ data.price}}</td>
          <td>{{data.total_cost}}</td>
          <td>{{data.bonus}}</td>

          <td>{{data.is_tester==1?'是':'否'}}</td>
          <td>{{ data.status|userBet }}</td>
          <td>{{ data.bet_prize_group }}</td>

          <td>{{data.series_id}}</td>
          <td>{{data.method_sign}}</td>
          <td>{{data.method_name}}</td>
          <td class='home-change-color' (click)='utilsService.show_modal_text(data.ip)'>
            <span style='width: 90px'>{{data.ip}}</span>
          </td>
          <td class='home-change-color' (click)='utilsService.show_modal_text(data.proxy_ip)'>
            <span style='width: 90px'>{{data.proxy_ip}}</span>
          </td>
          <td>{{data.bet_from}}</td>
        </tr>

        <!-- </ng-template> -->

      </tbody>
    </nz-table>

  </nz-content>
</nz-layout>